var Unit=new Class({Implements:[Options,Events],initialize:function(a){this.setupData();this.addEvent("TIMELINE",this.handleNavigationEvent)},start:function(){this.setupScene()},setupData:function(a){this.data=new Object()},setupScene:function(){this.data.video=this._setupVideo("media/video/country/country_cla01_start","video_1","entry.video.done");this.data.video.preload();this.data.start_button=this._setupButton("Start","button_1","start.clicked",10,470)},handleNavigationEvent:function(a){console.log("Timeline event");console.log(a);switch(a.next){case"start.clicked":this.data.start_button.remove();this.data.start_button=null;this.data.video.nextAction="entry.video.done";this.data.video.start();break;case"entry.video.done":this.data.audio=this._setupAudio("media/sound/country/country_vdcb1b","audio_1","question.1.sound.done");this.data.audio.start();this._setVideoSource(this.data.video,"media/video/country/country_cla01_next");this.data.video.preload();break;case"question.1.sound.done":this.log("Sound done");this.data.questions=this._setupQuestions({data:["Slow down immediately","Slow down as we come into the bend","Maintain our current speed until any hazard is visible"],correct:"2"});this.data.submit_button=this._setupButton("Submit answer","button_2","submit.1.clicked",10,470);break;case"submit.1.clicked":this.data.submit_button.remove();this.data.submit_button=null;this.data.questions.showCorrect();this.data.audio=this._setupAudio("media/sound/country/country_vdcb4c","audio_2","feedback.1.sound.done");this.data.audio.start();break;case"feedback.1.sound.done":this.data.audio=this._setupAudio("media/sound/country/country_vdcb4d","audio_3","next.sound.done");this.data.audio.start();break;case"next.sound.done":this.data.continue_button=this._setupButton("Continue","button_3","continue.clicked",10,470);break;case"continue.clicked":this.data.questions.remove();this.data.continue_button.remove();this.data.continue_button=null;this.data.video.nextAction="next.video.done";this.data.video.start();break;case"next.video.done":console.log("next.video.done");this.data.audio=this._setupAudio("media/sound/country/country_vdcb1f","audio_4","question.2.sound.done");this.data.audio.start();break;case"question.2.sound.done":this.log("question.2.sound.done");this.data.questions=this._setupQuestions({data:["Some cattle stray out in front of us, just as we come around the corner","A farmhand on a motorbike darts out in front of us."]});this.data.submit_button=this._setupButton("Submit answer","button_4","submit.2.clicked",10,470);break;case"submit.2.clicked":this.data.submit_button.remove();this.data.submit_button=null;this.data.questions.showCorrect();this.data.audio=this._setupAudio("media/sound/country/country_vdcb4f","audio_5","feedback.2.sound.done");this.data.audio.start();break}},log:function(a){console.log("****** "+a+" ******")},_setupVideo:function(b,d,a){var c=new VideoPlayer(d,this);c.nextAction=a;this._setVideoSource(c,b);c.show();return c}.protect(),_setVideoSource:function(b,a){var c=new Object();c.source=[{type:"video/mp4",src:a+".mp4"},{type:"video/webm",src:a+".webm"},{type:"video/ogg",src:a+".ogg"}];c.poster={src:a+"_first.jpg"};console.log(c);b.setParams(c)}.protect(),_setupAudio:function(c,d,b){var a=new AudioPlayer(d,this);a.nextAction=b;a.setSource(c+".mp3|"+c+".ogg");return a}.protect(),_setupButton:function(d,f,b,a,e){var c=new Button({style:{left:a+"px",top:e+"px"},text:d,id:f,next:b},this);c.add();c.show();return c}.protect(),_setupQuestions:function(a){var b=new Questions(a,this);b.add();b.show();return b}});