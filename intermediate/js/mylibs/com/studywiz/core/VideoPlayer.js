var VideoPlayer=new Class({Implements:Events,initialize:function(a,b){this.id=a;this.parent=b;this.nextAction=new String();this.videoSource=new Array();this.myVideoPlayer=null;this.videoElement=new Element("video",{id:this.id,preload:"auto",poster:"","class":"video-js"});this.add()},setParams:function(a){this.videoSource=a.source;this.videoElement.setProperty("poster",a.poster.src);if(this.myVideoPlayer!=null){this.myVideoPlayer.src(this.videoSource)}},preload:function(){if(this.myVideoPlayer==null){this.myVideoPlayer=_V_(this.id,{controls:false,autoplay:false,preload:"auto"});this.myVideoPlayer.ready((function(){this.myVideoPlayer.src(this.videoSource);this.myVideoPlayer.size("640","480");this.myVideoPlayer.pause();this.myVideoPlayer.addEvent("loadstart",function(){console.log("Loading")});this.myVideoPlayer.addEvent("progress",function(){console.log("Progress")});console.log("Adding ended listener");this.myVideoPlayer.addEvent("ended",function(){this.parent.fireEvent("TIMELINE",{type:"video.finished",id:this.id,next:this.nextAction})}.bind(this))}.bind(this)))}},start:function(){if(this.myVideoPlayer!=null){console.log(this.myVideoPlayer.bufferedPercent());this.myVideoPlayer.play()}},add:function(){var a=document.getElementById("videoHolder");if(a==null){a=new Element("div",{id:"videoHolder"});a.inject(document.body);this.videoElement.inject(a)}this.hide()},show:function(){this.videoElement.fade("in")},hide:function(){this.videoElement.fade("out")},stop:function(){this.myVideoPlayer.pause();this.myVideoPlayer.currentTime(0);this.myVideoPlayer.pause()},pause:function(){this.myVideoPlayer.pause()},seek:function(a){this.myVideoPlayer.pause();this.myVideoPlayer.currentTime=a;this.myVideoPlayer.pause()}});